{"mappings":"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","sources":["src/zl.js","src/zl-element.js","src/zl-dialog.js","src/zl-list.js","src/zl-context.js","src/zl-tabs.js","src/index.js"],"sourcesContent":["\nimport { Template, Element } from 'riza';\n\n//!class zl\n\nconst zl =\n{\n\t/**\n\t * Registered elements with the `register` method.\n\t * !static elements: Array<object>;\n\t */\n\telements: [ ],\n\n\t/**\n\t * Compiles a violet template and returns the evaluator function.\n\t * @param {string} str - Template to compile.\n\t * @returns {(data) => string}\n\t * !static template(str);\n\t */\n\ttemplate: function (str)\n\t{\n\t\treturn Template.compile(str);\n\t},\n\n\t/**\n\t * Registers a new custom element with the specified name and prototypes.\n\t * @param {string} name - Name of the element. Must be unique.\n\t * @param  {...any} protos - Prototypes or super class names to add to the element.\n\t * !static register (name, ...protos);\n\t */\n\tregister: function (name, ...protos)\n\t{\n\t\tthis.elements.push(name);\n\t\tElement.register(name, ...protos);\n\t},\n\n\t/**\n\t * Aligns the specified value such that it is a factor of the given step.\n\t * @param {numbe} value - Value to align.\n\t * @param {number} step - Step to align the value to.\n\t * @returns {number}\n\t * !static alignValue (value, step);\n\t */\n\talignValue: function (value, step)\n\t{\n\t\treturn Math.round(value/step)*step;\n\t},\n\n\t/**\n\t * Returns `true` if the rectangles overlap.\n\t * @param {DOMRect} rect1 - First rectangle.\n\t * @param {DOMRect} rect2 - Second rectangle.\n\t * @returns {boolean}\n\t * !static overlapTes (rect1, rect2);\n\t */\n\toverlapTest: function (rect1, rect2)\n\t{\n\t\tvar _x1 = Math.max(rect1.left, rect2.left);\n\t\tvar _y1 = Math.max(rect1.top, rect2.top);\n\t\tvar _x2 = Math.min(rect1.right, rect2.right);\n\t\tvar _y2 = Math.min(rect1.bottom, rect2.bottom);\n\t\n\t\treturn Math.max(0, _y2-_y1) * Math.max(0, _x2-_x1) > 0;\t\n\t},\n\n\t/**\n\t * Utility methods related to element position.\n\t * !static position = {\n\t */\n\tposition:\n\t{\n\t\t/**\n\t\t * Reads the position (and size) of the given element.\n\t\t * @param {Element} elem - Source element.\n\t\t * @returns { {x:number, y:number, width:number, height:number} }\t\n\t\t */\n\t\tget: function (elem)\n\t\t{\n\t\t\tlet p = elem.getBoundingClientRect();\n\t\t\treturn { x: p.left, y: p.top, width: p.width, height: p.height };\n\t\t},\n\n\t\t/**\n\t\t * Sets the position of the specified element.\n\t\t * @param {Element} elem - Target element.\n\t\t * @param {number} x - X position.\n\t\t * @param {number} y - Y position.\n\t\t * @returns {void}\n\t\t */\n\t\t/**\n\t\t * Sets the position of the specified element.\n\t\t * @param {Element} elem - Target element.\n\t\t * @param { {x:number, y:number} } pos - Position of the element.\n\t\t * @returns {void}\n\t\t */\n\t\tset: function (elem, ...args)\n\t\t{\n\t\t\tif (args.length == 1)\n\t\t\t\treturn this.set (elem, args[0].x, args[0].y);\n\n\t\t\telem.style.position = 'absolute';\n\t\t\telem.style.margin = 0;\n\t\t\telem.style.transform = 'translateX(0) translateY(0)';\n\n\t\t\telem.style.left = args[0] + 'px';\n\t\t\telem.style.top = args[1] + 'px';\n\t\t}\n\t},\n\t//!}\n\n\t/**\n\t * Utility methods to add drag support to elements.\n\t * !static draggable = {\n\t */\n\tdraggable:\n\t{\n\t\t/**\n\t\t * Indicates if the draggable module has been initialized.\n\t\t */\n\t\tinitialized: false,\n\n\t\t/**\n\t\t * Internal state.\n\t\t */\n\t\tstate: { enabled: false, sx: 0, sy: 0, pos: null, target: null },\n\n\t\t/**\n\t\t * Draggable elements grouped by their group name.\n\t\t */\n\t\tgroup: { },\n\n\t\t/**\n\t\t * Attaches draggable support to the specified element.\n\t\t * @param {Element} handle - Drag handle element.\n\t\t * @param {Element} target - Target draggable element (container).\n\t\t * @param {string} group? - Name of the draggable group.\n\t\t * @returns {void}\n\t\t * !static attach (handle, target, group);\n\t\t */\n\t\tattach: function (handle, target, group)\n\t\t{\n\t\t\tif (!handle || !target)\n\t\t\t\treturn;\n\n\t\t\tif (!group) group = 'default';\n\n\t\t\tif (!this.initialized)\n\t\t\t{\n\t\t\t\twindow.addEventListener('mousemove', this._mousemove.bind(this), true);\n\t\t\t\twindow.addEventListener('mouseup', this._mouseup.bind(this), true);\n\t\t\t\tthis.initialized = true;\n\t\t\t}\n\n\t\t\tif (!(group in this.group))\n\t\t\t\tthis.group[group] = { max: 800, list: [ ] };\n\n\t\t\ttarget.style.zIndex = this.group[group].max++;\n\t\t\tthis.group[group].list.push(target);\n\n\t\t\ttarget.front = () =>\n\t\t\t{\n\t\t\t\ttarget.style.zIndex = this.group[group].max;\n\n\t\t\t\tfor (let i of this.group[group].list)\n\t\t\t\t\ti.style.zIndex--;\n\n\t\t\t\tif ('onFront' in target)\n\t\t\t\t\ttarget.onFront();\n\t\t\t};\n\n\t\t\thandle.onmousedown = (evt) =>\n\t\t\t{\n\t\t\t\tthis.state.sx = evt.clientX;\n\t\t\t\tthis.state.sy = evt.clientY;\n\t\t\t\tthis.state.target = target;\n\t\t\t\tthis.state.pos = zl.position.get(target);\n\t\t\t\tthis.state.enabled = true;\n\n\t\t\t\ttarget.front();\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Global mouse move event handler.\n\t\t */\n\t\t_mousemove: function (evt)\n\t\t{\n\t\t\tif (!this.state.enabled)\n\t\t\t\treturn;\n\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation();\n\n\t\t\tlet dx = evt.clientX - this.state.sx;\n\t\t\tlet dy = evt.clientY - this.state.sy;\n\n\t\t\tzl.position.set (this.state.target, this.state.pos.x + dx, this.state.pos.y + dy);\n\n\t\t\tif ('onDraggableMoved' in this.state.target)\n\t\t\t\tthis.state.target.onDraggableMoved(this.state.pos.x + dx, this.state.pos.y + dy);\n\t\t},\n\n\t\t/**\n\t\t * Global mouse up event handler.\n\t\t */\n\t\t_mouseup: function (evt)\n\t\t{\n\t\t\tif (this.state.enabled)\n\t\t\t{\n\t\t\t\tthis.state.enabled = false;\n\t\t\t\tevt.preventDefault();\n\t\t\t\tevt.stopPropagation();\n\t\t\t}\n\t\t}\n\t},\n\t//!}\n\n\t/**\n\t * Utility methods to add scroll support to elements.\n\t * !static scrollable = {\n\t */\n\tscrollable:\n\t{\n\t\t/**\n\t\t * Attaches scroll support to the specified element.\n\t\t * @param {Element} target - Element to attach the scroll support.\n\t\t * @returns void\n\t\t * !static attach (target);\n\t\t */\n\t\tattach: function (target)\n\t\t{\n\t\t\tlet mutex = false;\n\n\t\t\tlet bar = document.createElement('em');\n\t\t\tbar.classList.add('vs-bar');\n\t\t\tbar.classList.add('pseudo');\n\n\t\t\tlet innerBar = document.createElement('em');\n\t\t\tbar.appendChild(innerBar);\n\n\t\t\tlet innerMostBar = document.createElement('em');\n\t\t\tinnerBar.appendChild(innerMostBar);\n\n\t\t\ttarget.appendChild(bar);\n\n\t\t\tconst update = function()\n\t\t\t{\n\t\t\t\tlet height = target.getBoundingClientRect().height;\n\t\t\t\tinnerMostBar.style.height = (100*height / target.scrollHeight).toFixed(2) + \"%\";\n\n\t\t\t\tbar.style.top = target.scrollTop + \"px\";\n\t\t\t\tinnerMostBar.style.top = (100*target.scrollTop / target.scrollHeight).toFixed(2) + \"%\";\n\t\t\t};\n\n\t\t\ttarget._observer_scroll = new MutationObserver(function()\n\t\t\t{\n\t\t\t\tif (mutex) return;\n\t\t\t\tmutex = true;\n\n\t\t\t\tif (bar.parentNode != target)\n\t\t\t\t{\n\t\t\t\t\tbar.style.top = '0px';\n\t\t\t\t\tinnerMostBar.style.height = '0px';\n\n\t\t\t\t\ttarget.appendChild(bar);\n\t\t\t\t}\n\n\t\t\t\tupdate();\n\t\t\t\tmutex = false;\n\t\t\t});\n\n\t\t\ttarget._observer_scroll.observe (target, { childList: true });\n\t\t\tupdate();\n\n\t\t\ttarget.onwheel = function (evt)\n\t\t\t{\n\t\t\t\ttarget.scrollTop += 15*evt.deltaY;\n\n\t\t\t\tbar.style.top = target.scrollTop + \"px\";\n\t\t\t\tinnerMostBar.style.top = (100*target.scrollTop / target.scrollHeight).toFixed(2) + \"%\";\n\t\t\t};\n\t\t}\n\t},\n\t//!}\n\n\t/**\n\t * Utility methods to add text editing support to elements.\n\t * !static editable = {\n\t */\n\teditable:\n\t{\n\t\t/**\n\t\t * Attaches an editable to the specified target. The callback(new_value, old_value) is called when an event on the input happens (blur, ENTER-key, ESC-key),\n\t\t * and if the callback returns false editing will continue (and the input will be re-focused), if the callback returns true nothing will be done, and if\n\t\t * any other value is returned, it will be used as the new text content of the target. A new_value of null is sent to the callback when ESC or onblur happens.\n\t\t * \n\t\t * @param {Element} target - Element to add the edition support.\n\t\t * @param {string} prev_value - Previous value prior to edition.\n\t\t * @param {(curValue:string, prevValue:string) => boolean)} callback - Callback to validate the values.\n\t\t * @returns {void}\n\t\t * !static attach (target, prev_value, callback);\n\t\t */\n\t\tattach: function (target, prev_value, callback)\n\t\t{\n\t\t\tif (target.querySelector('.inline-input') != null)\n\t\t\t\treturn;\n\n\t\t\tif (prev_value === null)\n\t\t\t\tprev_value = target.innerText.trim();\n\n\t\t\tlet input = document.createElement('input');\n\t\t\tinput.className = 'inline-input';\n\t\t\tinput.type = 'text';\n\t\t\tinput.value = prev_value;\n\n\t\t\tlet fn = function (cur_value)\n\t\t\t{\n\t\t\t\tlet new_value = callback(cur_value, prev_value);\n\t\t\t\tif (new_value === true) return;\n\n\t\t\t\tif (new_value !== false)\n\t\t\t\t{\n\t\t\t\t\ttarget.classList.remove('p-relative');\n\t\t\t\t\ttarget.innerText = new_value;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinput.onblur = () => fn(null)\n\n\t\t\tinput.onkeydown = (evt) =>\n\t\t\t{\n\t\t\t\tif (evt.keyCode == 27 || evt.keyCode == 13)\n\t\t\t\t{\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tif (evt.keyCode == 27)\n\t\t\t\t\treturn input.onblur();\n\n\t\t\t\tif (evt.keyCode == 13)\n\t\t\t\t\tfn(input.value.trim());\n\t\t\t};\n\n\t\t\ttarget.classList.add('p-relative');\n\t\t\ttarget.appendChild(input);\n\n\t\t\tinput.select();\n\t\t\tinput.focus();\n\t\t}\n\t},\n\t//!}\n\n\t/**\n\t * Utility methods to add selection support to elements.\n\t * !static selectable = {\n\t */\n\tselectable:\n\t{\n\t\tinitialized: false,\n\n\t\tstate: 0,\n\t\tsx: 0, sy: 0, limit: null,\n\t\trect: { left: 0, top: 0, right: 0, bottom: 0 },\n\n\t\tdiv: null,\n\n\t\t/**\n\t\t * Adds selection support to the specified element. Event `onSelectionChanged` will be triggered on the element whenever the selection changes.\n\t\t * Attribute `selection` of the element will have the list of items selected.\n\t\t * @param {Element} target - Element to add the selection support.\n\t\t * !static attach (target);\n\t\t */\n\t\tattach: function (target)\n\t\t{\n\t\t\tif (!this.initialized)\n\t\t\t{\n\t\t\t\tthis.div = document.createElement('div');\n\t\t\t\tthis.div.style.position = 'absolute';\n\t\t\t\tthis.div.style.zIndex = '99999';\n\t\t\t\tthis.div.style.left = '0px';\n\t\t\t\tthis.div.style.top = '0px';\n\t\t\t\tthis.div.style.background = 'rgba(255,255,255,0.25)';\n\t\t\t\tthis.div.style.border = '1px solid rgba(0,0,0,0.5)';\n\t\t\t\tdocument.body.appendChild (this.div);\n\n\t\t\t\twindow.addEventListener('mousemove', (evt) =>\n\t\t\t\t{\n\t\t\t\t\tif (!this.state) return;\n\t\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tevt.stopPropagation();\n\t\n\t\t\t\t\tthis.rect.left = Math.max(Math.min(this.sx, evt.clientX), this.limit.left);\n\t\t\t\t\tthis.rect.top = Math.max(Math.min(this.sy, evt.clientY), this.limit.top);\n\t\t\t\t\tthis.rect.right = Math.min(Math.max(this.sx, evt.clientX), this.limit.right);\n\t\t\t\t\tthis.rect.bottom = Math.min(Math.max(this.sy, evt.clientY), this.limit.bottom);\n\n\t\t\t\t\tthis.div.style.left = this.rect.left + 'px';\n\t\t\t\t\tthis.div.style.top = this.rect.top + 'px';\n\t\t\t\t\tthis.div.style.width = (this.rect.right - this.rect.left) + 'px';\n\t\t\t\t\tthis.div.style.height = (this.rect.bottom - this.rect.top) + 'px';\n\t\t\t\t},\n\t\t\t\ttrue);\n\n\t\t\t\twindow.addEventListener('mouseup', (evt) =>\n\t\t\t\t{\n\t\t\t\t\tif (!this.state) return;\n\n\t\t\t\t\tthis.div.style.left = '-1000px';\n\t\t\t\t\tthis.div.style.top = '-1000px';\n\n\t\t\t\t\tthis.state = 0;\n\n\t\t\t\t\tlet list = [];\n\n\t\t\t\t\tfor (let i of this.target.selection)\n\t\t\t\t\t\ti.classList.remove('selected');\n\n\t\t\t\t\tfor (let i of this.target.children)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (zl.overlapTest(this.rect, i.getBoundingClientRect()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ti.classList.add('selected');\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.target.selection = list;\n\n\t\t\t\t\tif ('onSelectionChanged' in this.target)\n\t\t\t\t\t\tthis.target.onSelectionChanged (this.target.selection);\n\t\t\t\t});\n\n\t\t\t\tthis.initialized = true;\n\t\t\t}\n\n\t\t\ttarget.unselectable ='on';\n\t\t\ttarget.style.userSelect = 'none';\n\t\t\ttarget.selection = [];\n\n\t\t\ttarget.addEventListener('mousedown', (evt) =>\n\t\t\t{\n\t\t\t\tif (evt.which != 1)\treturn\n\n\t\t\t\tthis.limit = target.getBoundingClientRect();\n\t\t\t\tthis.target = target;\n\t\t\t\tthis.state = 1;\n\n\t\t\t\tthis.sx = evt.clientX;\n\t\t\t\tthis.sy = evt.clientY;\n\n\t\t\t\tthis.rect.left = this.sx-1;\n\t\t\t\tthis.rect.top = this.sy-1;\n\t\t\t\tthis.rect.right = this.sx+1;\n\t\t\t\tthis.rect.bottom = this.sy+1;\n\t\t\t});\n\t\t}\n\t},\n\t//!}\n\n\t/**\n\t * Forces the browser to show a download dialog.\n\t * @param {string} filename - Filename to show in the download dialog.\n\t * @param {string} dataUrl - Data URI to download.\n\t * \n\t * !static showDownload (filename, dataUrl);\n\t */\n\tshowDownload: function (filename, dataUrl)\n\t{\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = dataUrl;\n\n\t\tlink.style.display = 'none';\n\t\tlink.download = filename;\n\t\tlink.target = \"_blank\";\n\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t},\n\n\t/**\n\t * Forces the browser to show a file selection dialog.\n\t * @param {boolean} allowMultiple - Set to `true` to allow multiple selections.\n\t * @param {string} accept - Accepted MIME types.\n\t * @param {(Array<File>) => void} callback - Callback used to handle the selected files.\n\t * \n\t * !static showFilePicker (allowMultiple, accept, callback);\n\t */\n\tshowFilePicker: function (allowMultiple, accept, callback)\n\t{\n\t\tvar input = document.createElement(\"input\");\n\n\t\tinput.type = \"file\";\n\t\tinput.accept = accept;\n\t\tinput.style.display = 'none';\n\t\tinput.multiple = allowMultiple;\n\n\t\tdocument.body.appendChild(input);\n\n\t\tinput.onchange = function ()\n\t\t{\n\t\t\tcallback(input.files);\n\t\t};\n\n\t\tdocument.body.onfocus = function ()\n\t\t{\n\t\t\tdocument.body.onfocus = null;\n\t\t\tdocument.body.removeChild(input);\n\t\t};\n\n\t\tinput.click();\n\t},\n\n\t/**\n\t * Loads a file using FileReader and returns the result as a dataURL.\n\t * @param {File} file - File to load.\n\t * @param {(dataUrl:string) => void} callback\n\t * \n\t * !loadAsDataURL (file, callback);\n\t */\n\tloadAsDataURL: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result);\n\t\t};\n\n\t\treader.readAsDataURL(file);\n\t},\n\n\t/**\n\t * Loads a file using FileReader and returns the result as text.\n\t * @param {File} file - File to load.\n\t * @param {(text:string) => void)} callback\n\t * \n\t * !static loadAsText (file, callback);\n\t */\n\tloadAsText: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result);\n\t\t};\n\n\t\treader.readAsText(file);\n\t},\n\n\t/**\n\t * Loads a file using FileReader and returns the result as an array buffer.\n\t * @param {File} file - File to load.\n\t * @param {(value:ArrayBuffer) => void} callback \n\t * \n\t * !static loadAsArrayBuffer (file, callback);\n\t */\n\tloadAsArrayBuffer: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result);\n\t\t};\n\n\t\treader.readAsArrayBuffer(file);\n\t},\n\n\t/**\n\t * Loads an array of File objects using FileReader and returns them as data URLs.\n\t * @param {Array<File>} fileList - Files to load.\n\t * @param {Array<string>} callback \n\t * @returns {void}\n\t * \n\t * !static loadAllAsDataURL (fileList, callback);\n\t */\n\tloadAllAsDataURL: function (fileList, callback)\n\t{\n\t\tvar result = [];\n\n\t\tif (!fileList || !fileList.length)\n\t\t{\n\t\t\tcallback(result);\n\t\t\treturn;\n\t\t}\n\n\t\tvar loadNext = function (i)\n\t\t{\n\t\t\tif (i == fileList.length)\n\t\t\t{\n\t\t\t\tcallback(result);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tzl.loadAsDataURL (fileList[i], function(url) {\n\t\t\t\tresult.push({ name: fileList[i].name, size: fileList[i].size, url: url });\n\t\t\t\tloadNext(i+1);\n\t\t\t});\n\t\t};\n\n\t\tloadNext(0);\n\t}\n};\n\nexport default zl;\n","/*\n**\tzl/zl-element\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport zl from './zl';\n\n/**\n * Base element.\n */\n\nzl.register ('zl-element',\n{\n\tinit: function() {\n\t}\n});\n","/*\n**\tzl/zl-dialog\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport zl from './zl';\n\n/**\n * Floating dialog.\n */\n\nzl.register ('zl-dialog', 'zl-element',\n{\n\tready: function()\n\t{\n\t\tthis.classList.add('zl-dialog');\n\n\t\tif (this.classList.contains('x-draggable'))\n\t\t\tzl.draggable.attach(this.querySelector('.header'), this, 'zl-dialog');\n\t},\n\n\tisVisible: function()\n\t{\n\t\treturn this.classList.contains('visible');\n\t},\n\n\tshow: function(imm=false)\n\t{\n\t\tif (this.classList.contains('visible'))\n\t\t\treturn false;\n\n\t\tthis.classList.remove('imm', 'hidden');\n\t\tthis.classList.add('visible');\n\n\t\tif (imm === true) this.classList.add('imm');\n\n\t\tif ('front' in this) this.front();\n\t\treturn true;\n\t},\n\n\thide: function(imm=false)\n\t{\n\t\tif (this.classList.contains('hidden'))\n\t\t\treturn false;\n\n\t\tthis.classList.remove('imm', 'visible');\n\t\tthis.classList.add('hidden');\n\n\t\tif (imm === true) this.classList.add('imm');\n\t\treturn true;\n\t},\n\n\tmaximize: function()\n\t{\n\t\tthis.classList.add('maximized');\n\t},\n\n\trestore: function()\n\t{\n\t\tthis.classList.remove('maximized');\n\t}\n});\n","/*\n**\tzl/zl-list\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport zl from './zl';\n\n/**\n * Options List\n */\n\nzl.register ('zl-list', 'zl-element',\n{\n\t'event click span[data-value]': function(evt)\n\t{\n\t\tthis.setValue (evt.source.dataset.value);\n\t},\n\n\tready: function()\n\t{\n\t\tthis.classList.add('zl-list');\n\t\tthis.type = 'field';\n\n\t\tif (this.dataset.rows)\n\t\t{\n\t\t\tthis.style.height = '0px';\n\t\t\tthis.baseHeight = this.getHeight();\n\t\t}\n\n\t\t//if (this.classList.contains('x-scrollable'))\n\t\t//\tzl.scrollable.attach(this);\n\t},\n\n\tonConnected: function()\n\t{\n\t\tif (!this.dataset.rows)\n\t\t\treturn;\n\n\t\tif (this.__observer == null)\n\t\t{\n\t\t\tthis.__observer = new MutationObserver (() =>\n\t\t\t{\n\t\t\t\tif (this.children.length == 0 || this.children[0].tagName != 'SPAN')\n\t\t\t\t\treturn;\n\n\t\t\t\tconst h = this.getHeight(this.children[0]);\n\t\t\t\tif (h == this.itemHeight) return;\n\n\t\t\t\tthis.itemHeight = h;\n\t\t\t\tthis.style.height = (this.dataset.rows*this.itemHeight + this.baseHeight) + 'px';\n\t\t\t});\n\t\t}\n\n\t\tthis.__observer.observe (this, { childList: true });\n\t},\n\n\tonDisconnected: function()\n\t{\n\t\tif (!this.dataset.rows)\n\t\t\treturn;\n\n\t\tthis.__observer.disconnect();\n\t},\n\n\tsetValue: function (value)\n\t{\n\t\tlet selected = this.querySelector('span[data-value=\"'+value+'\"]');\n\t\tif (!selected) return;\n\n\t\tlet curr = this.querySelector('span.selected');\n\t\tif (curr)\n\t\t{\n\t\t\tif (curr.dataset.value == value)\n\t\t\t\treturn;\n\n\t\t\tcurr.classList.remove('selected');\n\t\t}\n\n\t\tselected.classList.add('selected');\n\n\t\tif (this.onchange) this.onchange();\n\t},\n\n\tgetValue: function()\n\t{\n\t\tlet selected = this.querySelector('span.selected');\n\t\treturn selected ? selected.dataset.value : null;\n\t}\n});\n","/*\n**\tzl/zl-context\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport zl from './zl';\n\n/**\n * Context menu.\n */\n\nzl.register ('zl-context',\n{\n\tisRoot: true,\n\n\t'event click [data-action]': function(evt)\n\t{\n\t\tevt.params = { elem: this._source, ...evt.params, ...this._source.dataset };\n\t\tevt.continuePropagation = true;\n\t},\n\n\tinit: function()\n\t{\n\t\tthis.classList.add('zl-dropdown');\n\t\tthis.classList.add('zl-context');\n\t},\n\n\tonConnected: function()\n\t{\n\t\tthis.root = this.findRoot();\n\n\t\tthis._contextListener = this.root.listen ('contextmenu', this.dataset.target, (evt) =>\n\t\t{\n\t\t\tthis.classList.add('visible');\n\t\t\tthis._source = evt.source;\n\n\t\t\tlet hdl = () => {\n\t\t\t\tthis.classList.remove('visible');\n\t\t\t\twindow.removeEventListener('mouseup', hdl, true);\n\t\t\t};\n\n\t\t\twindow.addEventListener('mouseup', hdl, true);\n\n\t\t\tlet parent = zl.position.get(this.root);\n\t\t\tzl.position.set(this, evt.clientX - parent.x, evt.clientY - parent.y);\n\t\t});\n\t},\n\n\tonDisconnected: function()\n\t{\n\t\tthis._contextListener.remove();\n\t},\n\n\tshow: function()\n\t{\n\t\tif (this.classList.contains('visible'))\n\t\t\treturn;\n\n\t\tthis.classList.remove('hidden');\n\t\tthis.classList.add('visible');\n\t},\n\n\thide: function()\n\t{\n\t\tif (this.classList.contains('hidden'))\n\t\t\treturn;\n\n\t\tthis.classList.remove('visible');\n\t\tthis.classList.add('hidden');\n\t}\n});\n","/*\n**\tzl/zl-tabs\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport zl from './zl';\n\n/**\n * Content tabs.\n */\n\nzl.register ('zl-tabs',\n{\n\t'event click [data-name]': function (evt) {\n\t\tthis.selectTab (evt.source.dataset.name);\n\t},\n\n\tready: function()\n\t{\n\t\tthis.classList.add('zl-tabs');\n\n\t\tif ('container' in this.dataset)\n\t\t\tthis.container = document.querySelector(this.dataset.container);\n\t\telse\n\t\t\tthis.container = this.nextElementSibling;\n\n\t\tif ('default' in this.dataset)\n\t\t\tthis._hideTabsExcept(this.dataset.default);\n\t\telse\n\t\t\tthis._hideTabsExcept(null);\n\t},\n\n\t/**\n\t**\tHides all tabs except the one with the specified exceptName, if none specified then all tabs will be hidden (display: none), additionally\n\t**\tthe respective link item in the tab definition will have class 'active'.\n\t*/\n\t_hideTabsExcept: function (exceptName)\n\t{\n\t\tif (this.container == null) return;\n\n\t\tif (!exceptName) exceptName = '';\n\n\t\tfor (let i = 0; i < this.container.children.length; i++)\n\t\t{\n\t\t\tif (this.container.children[i].dataset.name == exceptName)\n\t\t\t{\n\t\t\t\tif (this.container.children[i].style.display == 'none')\n\t\t\t\t\tthis.dispatch('tab-activate', { el: this.container.children[i] });\n\n\t\t\t\tthis.container.children[i].style.display = 'block';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.container.children[i].style.display == 'block')\n\t\t\t\t\tthis.dispatch('tab-deactivate', { el: this.container.children[i] });\n\n\t\t\t\tthis.container.children[i].style.display = 'none';\n\t\t\t}\n\t\t}\n\n\t\tlet links = this.querySelectorAll(\"[data-name]\");\n\n\t\tfor (let i = 0; i < links.length; i++)\n\t\t{\n\t\t\tif (links[i].dataset.name == exceptName)\n\t\t\t\tlinks[i].classList.add('active');\n\t\t\telse\n\t\t\t\tlinks[i].classList.remove('active');\n\t\t}\n\t},\n\n\t/**\n\t**\tShows the tab with the specified name.\n\t*/\n\t_showTab: function (name)\n\t{\n\t\treturn this._hideTabsExcept (name);\n\t},\n\n\t/**\n\t**\tSelects a tab given its name.\n\t*/\n\tselectTab: function (name)\n\t{\n\t\tthis._showTab (name);\n\t}\n});\n","\nimport './zl-element.js';\nimport './zl-dialog.js';\nimport './zl-list.js';\nimport './zl-context.js';\nimport './zl-tabs.js';\n\n//![import './zl']\nimport zl from './zl';\nexport default zl;\n"],"names":["$2eb25f9568cf0c33$var$zl","elements","template","str","$bWEXB$Template","compile","register","name","protos","this","push","$bWEXB$Element","alignValue","value","step","Math","round","overlapTest","rect1","rect2","_x1","max","left","_y1","top","_x2","min","right","_y2","bottom","position","get","elem","p","getBoundingClientRect","x","y","width","height","set","args","length","style","margin","transform","draggable","initialized","state","enabled","sx","sy","pos","target","group","attach","handle","window","addEventListener","_mousemove","bind","_mouseup","list","zIndex","front","i","onFront","onmousedown","evt","clientX","clientY","preventDefault","stopPropagation","dx","dy","onDraggableMoved","scrollable","mutex","bar","document","createElement","classList","add","innerBar","appendChild","innerMostBar","update","scrollHeight","toFixed","scrollTop","_observer_scroll","MutationObserver","parentNode","observe","childList","onwheel","deltaY","editable","prev_value","callback","querySelector","innerText","trim","input","className","type","fn","cur_value","new_value","remove","setTimeout","select","focus","onblur","onkeydown","keyCode","selectable","limit","rect","div","background","border","body","selection","i1","children","onSelectionChanged","unselectable","userSelect","which","showDownload","filename","dataUrl","link","href","display","download","click","removeChild","showFilePicker","allowMultiple","accept","multiple","onchange","files","onfocus","loadAsDataURL","file","reader","FileReader","onload","e","result","readAsDataURL","loadAsText","readAsText","loadAsArrayBuffer","readAsArrayBuffer","loadAllAsDataURL","fileList","loadNext","url","size","$2eb25f9568cf0c33$export$2e2bcd8739ae039","init","ready","contains","isVisible","show","imm","hide","maximize","restore","setValue","source","dataset","rows","baseHeight","getHeight","onConnected","__observer","tagName","h","itemHeight","onDisconnected","disconnect","selected","curr","getValue","isRoot","params","_source","continuePropagation","root","findRoot","_contextListener","listen","hdl","removeEventListener","parent","selectTab","container","nextElementSibling","_hideTabsExcept","default","exceptName","dispatch","el","links","querySelectorAll","_showTab","$25c7092a683b26bd$export$2e2bcd8739ae039"],"version":3,"file":"zill.js.map"}